<!DOCTYPE html>
<html>
<head>
  <title>Logs</title>
  <meta charset="utf-8">
  <meta name="description" content="Logs">
  <meta name="author" content="Brian Caffo, PhD">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="../../libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="../../libraries/frameworks/io2012/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="../../libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="../../libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="../../libraries/frameworks/io2012/js/slides" 
    src="../../libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
    <link rel="stylesheet" href = "../../assets/css/custom.css">
<link rel="stylesheet" href = "../../assets/css/ribbons.css">

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
    <!-- END LOGO SLIDE -->
    

    <!-- TITLE SLIDE -->
    <!-- Should I move this to a Local Layout File? -->
    <slide class="title-slide segue nobackground">
      <aside class="gdbar">
        <img src="../../assets/img/bloomberg_shield.png">
      </aside>
      <hgroup class="auto-fadein">
        <h1>Logs</h1>
        <h2>Mathematical Biostatistics Boot Camp</h2>
        <p>Brian Caffo, PhD<br/>Johns Hopkins Bloomberg School of Public Health</p>
      </hgroup>
          </slide>

    <!-- SLIDES -->
      <slide class="" id="slide-1" style="background:;">
  <hgroup>
    <h2>Table of contents</h2>
  </hgroup>
  <article>
    <ol>
<li>Logs</li>
<li>The geometric mean</li>
<li>GM and the CLT</li>
<li>Comparisons</li>
<li>The log-normal distribution</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>Logs</h2>
  </hgroup>
  <article>
    <ul>
<li>Recall that \(\log_B(x)\) is the number \(y\) so that \(B^y = x\)</li>
<li>Note that you can not take the log of a negative number; \(\log_B(1)\) is always 0 and \(\log_B(0)\) is \(-\infty\)</li>
<li>When the base is \(B = e\)  we write \(\log_e\) as just \(\log\) or \(\ln\)</li>
<li>Other useful bases are \(10\) (orders of magnitude) or \(2\)</li>
<li>Recall that \(\log(ab) = \log(a) + \log(b)\), \(\log(a^b) = b\log(a)\), \(\log(a/b) = \log(a) - \log(b)\) (\(\log\) turns multiplication into addition, division into subtraction, powers into multiplication)</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>Some reasons for &quot;logging&quot; data</h2>
  </hgroup>
  <article>
    <ul>
<li>To correct for right skewness </li>
<li>When considering ratios</li>
<li>In settings where errors are feasibly multiplicative, such as when dealing with concentrations or rates</li>
<li>To consider orders of magnitude (using log base 10); for example when considering astronomical distances</li>
<li>Counts are often logged (though note the problem with zero counts)</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>The geometric mean</h2>
  </hgroup>
  <article>
    <ul>
<li>The (sample) {\bf geometric mean} of a data set \(X_1,\ldots,X_n\) is
\[
\left(\prod_{i=1}^n X_i \right)^{1/n}
\]</li>
<li>Note that (provided that the \(X_i\) are positive) the log of the geometric mean is
\[
\frac{1}{n}\sum_{i=1}^n \log(X_i)
\]</li>
<li>As the log of the geometric mean is an average, the LLN and clt apply (under what assumptions?)</li>
<li>The geometric mean is always less than or equal to the sample (arithmetic) mean</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>The geometric mean</h2>
  </hgroup>
  <article>
    <ul>
<li>The geometric mean is often used when the \(X_i\) are all multiplicative</li>
<li>Suppose that in a population of interest, the prevalence of a disease rose \(2%\) one year, then fell \(1%\) the next, then rose \(2%\), then rose \(1%\); since these factors act multiplicatively it makes sense to consider the geometric mean
\[
\left(1.02 \times .99 \times 1.02 \times 1.01\right)^{1/4} = 1.01
\]
for a \(1%\) geometric mean increase in disease prevalence</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-6" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <ul>
<li>Notice that multiplying the initial prevalence by \(1.01^4\) is the same as multiplying by the original four numbers in sequence</li>
<li>Hence \(1.01\) is constant factor by which you would need to multiply the initial prevalence each year to achieve the same overall increase in prevalence over a four year period</li>
<li>The arithmetic mean, in contrast, is the constant factor by which your would need to <em>add</em> each year to achieve the same <em>total</em> increase (\(1.02 + .99 + 1.02 + 1.01\))</li>
<li>In this case the product and hence the geometric mean make more sense than the arithmetic mean</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>Nifty fact</h2>
  </hgroup>
  <article>
    <ul>
<li>The <em>question corner</em> (google) at the University of Toronto&#39;s web site (where I got much of this) has a fun interpretation of the geometric mean</li>
<li><p>If \(a\) and \(b\) are the lengths of the sides of a rectangle then</p>

<ul>
<li>The arithmetic mean \((a + b) / 2\) is the length of the sides of the square that has the same perimeter</li>
<li>The geometric mean \((ab)^{1/2}\) is the length of the sides of the square that has the same area</li>
</ul></li>
<li><p>So if you&#39;re interested in perimeters (adding) use the arithmetic mean; if you&#39;re interested in areas (multiplying) use the geometric mean</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>Asymptotics</h2>
  </hgroup>
  <article>
    <ul>
<li>Note, by the LLN the log of the geometric mean converges to \(\mu = E[\log(X)]\)</li>
<li>Therefore the geometric mean converges to \(\exp\{E[\log(X)]\} = e^\mu\), which is <em>not</em> the population mean on the natural scale; we call this the population geometric mean (but no one else seems to)</li>
<li>To reiterate
\[
\exp\{E[\log(x)]\} \neq E[\exp\{\log(X)\}] = E[X]
\]</li>
<li>Note if the distribution of \(\log(X)\) is symmetric then
\[
.5 = P(\log X \leq \mu) = P(X \leq e^\mu)
\]</li>
<li>Therefore, for log-symmetric distributions the geometric mean is estimating the median</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>GM and the CLT</h2>
  </hgroup>
  <article>
    <ul>
<li>If you use the CLT to create a confidence interval for the log measurements, your interval is estimating \(\mu\), the expected value of the log measurements</li>
<li>If you exponentiate the endpoints of the interval, you are estimating \(e^\mu\), the population geometric mean</li>
<li>Recall, \(e^\mu\) is the population median when the distribution of the logged data is symmetric</li>
<li>This is especially useful for paired data when their ratio, rather than their difference, is of interest</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>Example</h2>
  </hgroup>
  <article>
    <p>Rosner, Fundamentals of Biostatistics page 298 gives a paired design comparing SBP for matched oral contraceptive users and controls.</p>

<ul>
<li>The geometric mean ratio is 1.04 (4% increase in SBP for the OC users)</li>
<li>The T interval on the difference of the log scale measurements is [0.010, 0.067] log(mm Hg)</li>
<li>Exponentiating yields [1.010, 1.069] \(mm Hg\).</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>Comparisons</h2>
  </hgroup>
  <article>
    <ul>
<li>Consider when you have two independent groups, logging the individual data points and creating a confidence interval for the difference in the log means</li>
<li>Prove to yourself that exponentiating the endpoints of this interval is then an interval for the <em>ratio</em> of the population geometric means, \(\frac{e^{\mu_1}}{e^{\mu_2}}\)</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>The log-normal distribution</h2>
  </hgroup>
  <article>
    <ul>
<li>A random variable is <strong>log-normally</strong> distributed <em>if its log is a normally distributed random variable</em></li>
<li>&quot;I am log-normal&quot; means &quot;take logs of me and then I&#39;ll then be normal&quot;</li>
<li>Note log-normal random variables are not logs of normal random variables!!!!!! (You can&#39;t even take the log of a normal random variable)</li>
<li>Formally, \(X\) is lognormal\((\mu,\sigma^2)\) if \(\log(X) \sim \mbox{N}(\mu, \sigma^2)\)</li>
<li>If \(Y \sim \mbox{N}(\mu,\sigma^2)\) then \(X = e^Y\) is log-normal</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>The log-normal distribution</h2>
  </hgroup>
  <article>
    <ul>
<li>The log-normal density is
\[
\frac{1}{\sqrt{2\pi}} \times \frac{\exp[-\{\log(x) - \mu\}^2/ (2\sigma^2)]}{x}
~~\mbox{for}~~ 0\leq x \leq \infty
\]</li>
<li>Its mean is \(e^{\mu + (\sigma^2 / 2)}\) and variance is \(e^{2\mu + \sigma^2}(e^{ \sigma^2} - 1)\)</li>
<li>Its median is \(e^\mu\)</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>The log-normal distribution</h2>
  </hgroup>
  <article>
    <ul>
<li>Notice that if we assume that \(X_1,\ldots,X_n\) are log-normal\((\mu,\sigma^2)\) then \(Y_1 = \log X_1,\ldots, Y_n = \log X_n\) are normally distributed with mean \(\mu\) and variance \(\sigma^2\)</li>
<li>Creating a Gosset&#39;s \(t\) confidence interval on using the \(Y_i\) is a confidence interval for \(\mu\) the log of the median of the \(X_i\)</li>
<li>Exponentiate the endpoints of the interval to obtain a confidence interval for \(e^\mu\), the median on the original scale</li>
<li>Assuming log-normality, exponentiating \(t\) confidence intervals for the difference in two log means again estimates ratios of geometric means </li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>Example</h2>
  </hgroup>
  <article>
    <ul>
<li>Took GM volumes for the young and old groups, logged them</li>
<li>Did two independent group intervals, got old [13.24, 13.27] log(cubic cm) and young [13.29, 13.31] log(cubic cm).</li>
<li>Exponentiating yields [564.4, 577.5] cc, [592.0, 606.9] cc.</li>
<li>Doing a two group T interval on the logged measurements yields [0.032, 0.066] log(cubic cm)</li>
<li>exponentiating this interval yields [1.032, 1.068]</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>

  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
<!-- Grab CDN jQuery, fall back to local if offline -->
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="../../libraries/widgets/quiz/js/jquery-1.7.min.js"><\/script>')</script>
<!-- Load Javascripts for Widgets -->
<!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script> -->
<script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="../../libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
<script src="../../libraries/highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
</html>